<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Green School Nepal - Educational Game</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .green-gradient {
            background: linear-gradient(135deg, #4ade80 0%, #22c55e 100%);
        }
        .card-hover {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .nepal-flag {
            background: linear-gradient(45deg, #DC143C 0%, #003893 50%, #DC143C 100%);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useContext, createContext } = React;

        // Context for global state management
        const AppContext = createContext();

        // Mock data for demonstration
        const mockData = {
            provinces: [
                'Province 1', 'Madhesh Province', 'Bagmati Province',
                'Gandaki Province', 'Lumbini Province', 'Karnali Province',
                'Sudurpashchim Province'
            ],
            municipalities: {
                'Bagmati Province': ['Kathmandu', 'Lalitpur', 'Bhaktapur', 'Kirtipur'],
                'Province 1': ['Biratnagar', 'Dharan', 'Itahari', 'Damak'],
                'Gandaki Province': ['Pokhara', 'Gorkha', 'Lamjung', 'Syangja']
            },
            mandates: [
                {
                    id: 1,
                    title: "Solar Panel Installation",
                    description: "Install solar panels to reduce electricity consumption",
                    category: "Energy Efficiency",
                    difficulty: "Medium",
                    points: 50,
                    gameType: "task",
                    badge: { name: "Solar Champion", icon: "‚òÄÔ∏è", color: "yellow" }
                },
                {
                    id: 2,
                    title: "Waste Segregation System",
                    description: "Implement proper waste segregation in school",
                    category: "Waste Management",
                    difficulty: "Easy",
                    points: 30,
                    gameType: "quiz",
                    badge: { name: "Waste Warrior", icon: "‚ôªÔ∏è", color: "green" }
                },
                {
                    id: 3,
                    title: "Rainwater Harvesting",
                    description: "Set up rainwater harvesting system",
                    category: "Water Conservation",
                    difficulty: "Hard",
                    points: 80,
                    gameType: "challenge",
                    badge: { name: "Water Guardian", icon: "üíß", color: "blue" }
                },
                {
                    id: 4,
                    title: "School Garden Project",
                    description: "Create an organic garden in school premises",
                    category: "Sustainable Agriculture",
                    difficulty: "Medium",
                    points: 60,
                    gameType: "task",
                    badge: { name: "Green Thumb", icon: "üå±", color: "green" }
                },
                {
                    id: 5,
                    title: "Environmental Awareness Quiz",
                    description: "Test your knowledge about environmental protection",
                    category: "Environmental Education",
                    difficulty: "Easy",
                    points: 25,
                    gameType: "quiz",
                    badge: { name: "Eco Scholar", icon: "üéì", color: "purple" }
                }
            ],
            schools: [
                {
                    id: 1,
                    name: "Kathmandu Model School",
                    code: "KMS001",
                    province: "Bagmati Province",
                    municipality: "Kathmandu",
                    completedMandates: 35,
                    totalPoints: 1750,
                    carbonFootprint: 2.5,
                    isGreenSchool: true
                },
                {
                    id: 2,
                    name: "Pokhara Valley School",
                    code: "PVS002",
                    province: "Gandaki Province",
                    municipality: "Pokhara",
                    completedMandates: 28,
                    totalPoints: 1400,
                    carbonFootprint: 3.2,
                    isGreenSchool: false
                },
                {
                    id: 3,
                    name: "Biratnagar Public School",
                    code: "BPS003",
                    province: "Province 1",
                    municipality: "Biratnagar",
                    completedMandates: 42,
                    totalPoints: 2100,
                    carbonFootprint: 1.8,
                    isGreenSchool: true
                }
            ]
        };

        // Quiz questions for different mandates
        const quizQuestions = {
            2: [ // Waste Segregation System
                {
                    question: "What are the main categories of waste segregation?",
                    options: ["Wet and Dry", "Organic, Inorganic, and Hazardous", "Paper and Plastic", "Big and Small"],
                    correctAnswer: 1,
                    explanation: "Proper waste segregation involves separating organic (biodegradable), inorganic (recyclable), and hazardous waste."
                },
                {
                    question: "Which color bin is typically used for organic waste?",
                    options: ["Red", "Blue", "Green", "Yellow"],
                    correctAnswer: 2,
                    explanation: "Green bins are commonly used for organic/biodegradable waste."
                },
                {
                    question: "What percentage of waste can be reduced through proper segregation?",
                    options: ["20%", "40%", "60%", "80%"],
                    correctAnswer: 3,
                    explanation: "Proper waste segregation can reduce waste going to landfills by up to 80%."
                }
            ],
            5: [ // Environmental Awareness Quiz
                {
                    question: "What is the main cause of climate change?",
                    options: ["Solar flares", "Greenhouse gas emissions", "Ocean currents", "Volcanic eruptions"],
                    correctAnswer: 1,
                    explanation: "Greenhouse gas emissions from human activities are the primary cause of climate change."
                },
                {
                    question: "Which gas contributes most to the greenhouse effect?",
                    options: ["Oxygen", "Nitrogen", "Carbon Dioxide", "Hydrogen"],
                    correctAnswer: 2,
                    explanation: "Carbon dioxide is the most significant greenhouse gas contributing to climate change."
                },
                {
                    question: "What is the target for renewable energy in Nepal by 2030?",
                    options: ["50%", "70%", "80%", "90%"],
                    correctAnswer: 2,
                    explanation: "Nepal aims to achieve 80% renewable energy by 2030."
                }
            ]
        };

        // Main App Component
        function App() {
            const [currentUser, setCurrentUser] = useState(null);
            const [currentPage, setCurrentPage] = useState('home');
            const [schools, setSchools] = useState(mockData.schools);
            const [userProgress, setUserProgress] = useState({
                completedMandates: [],
                totalPoints: 0,
                badges: [],
                level: 1
            });

            const contextValue = {
                currentUser,
                setCurrentUser,
                currentPage,
                setCurrentPage,
                schools,
                setSchools,
                userProgress,
                setUserProgress,
                mandates: mockData.mandates
            };

            return (
                <AppContext.Provider value={contextValue}>
                    <div className="min-h-screen bg-gray-50">
                        <Header />
                        <main>
                            {currentPage === 'home' && <HomePage />}
                            {currentPage === 'login' && <LoginPage />}
                            {currentPage === 'register' && <RegisterPage />}
                            {currentPage === 'dashboard' && <Dashboard />}
                            {currentPage === 'mandates' && <MandatesPage />}
                            {currentPage === 'leaderboard' && <LeaderboardPage />}
                            {currentPage === 'carbon-calculator' && <CarbonCalculatorPage />}
                            {currentPage === 'admin' && <AdminPage />}
                        </main>
                        <Footer />
                    </div>
                </AppContext.Provider>
            );
        }

        // Header Component
        function Header() {
            const { currentUser, setCurrentPage, setCurrentUser } = useContext(AppContext);

            const handleLogout = () => {
                setCurrentUser(null);
                setCurrentPage('home');
            };

            return (
                <header className="gradient-bg text-white shadow-lg">
                    <div className="container mx-auto px-4 py-4">
                        <div className="flex items-center justify-between">
                            <div className="flex items-center space-x-4">
                                <div className="w-12 h-8 nepal-flag rounded"></div>
                                <div>
                                    <h1 className="text-2xl font-bold cursor-pointer" onClick={() => setCurrentPage('home')}>
                                        Green School Nepal
                                    </h1>
                                    <p className="text-sm opacity-90">UNESCO Greening Education Partnership</p>
                                </div>
                            </div>

                            <nav className="hidden md:flex items-center space-x-6">
                                {currentUser ? (
                                    <>
                                        <button onClick={() => setCurrentPage('dashboard')} className="hover:text-green-300 transition-colors">
                                            <i className="fas fa-tachometer-alt mr-2"></i>Dashboard
                                        </button>
                                        <button onClick={() => setCurrentPage('mandates')} className="hover:text-green-300 transition-colors">
                                            <i className="fas fa-tasks mr-2"></i>Mandates
                                        </button>
                                        <button onClick={() => setCurrentPage('leaderboard')} className="hover:text-green-300 transition-colors">
                                            <i className="fas fa-trophy mr-2"></i>Leaderboard
                                        </button>
                                        <button onClick={() => setCurrentPage('carbon-calculator')} className="hover:text-green-300 transition-colors">
                                            <i className="fas fa-calculator mr-2"></i>Carbon Calculator
                                        </button>
                                        {currentUser.role === 'admin' && (
                                            <button onClick={() => setCurrentPage('admin')} className="hover:text-green-300 transition-colors">
                                                <i className="fas fa-cog mr-2"></i>Admin
                                            </button>
                                        )}
                                        <div className="flex items-center space-x-4">
                                            <span className="text-sm">Welcome, {currentUser.name}</span>
                                            <button onClick={handleLogout} className="bg-red-500 hover:bg-red-600 px-4 py-2 rounded-lg transition-colors">
                                                Logout
                                            </button>
                                        </div>
                                    </>
                                ) : (
                                    <div className="space-x-4">
                                        <button onClick={() => setCurrentPage('login')} className="hover:text-green-300 transition-colors">
                                            Login
                                        </button>
                                        <button onClick={() => setCurrentPage('register')} className="bg-green-500 hover:bg-green-600 px-4 py-2 rounded-lg transition-colors">
                                            Register School
                                        </button>
                                    </div>
                                )}
                            </nav>
                        </div>
                    </div>
                </header>
            );
        }

        // Home Page Component
        function HomePage() {
            const { setCurrentPage } = useContext(AppContext);

            return (
                <div>
                    {/* Hero Section */}
                    <section className="gradient-bg text-white py-20">
                        <div className="container mx-auto px-4 text-center">
                            <h1 className="text-5xl font-bold mb-6">
                                Transform Your School into a üå± Green School
                            </h1>
                            <p className="text-xl mb-8 max-w-3xl mx-auto">
                                Join Nepal's largest educational initiative to create sustainable schools. 
                                Complete 30 out of 70 green mandates and earn your Green School certification!
                            </p>
                            <div className="space-x-4">
                                <button 
                                    onClick={() => setCurrentPage('register')}
                                    className="bg-green-500 hover:bg-green-600 text-white px-8 py-4 rounded-lg text-lg font-semibold transition-colors"
                                >
                                    Start Your Journey
                                </button>
                                <button 
                                    onClick={() => setCurrentPage('leaderboard')}
                                    className="bg-transparent border-2 border-white hover:bg-white hover:text-purple-600 text-white px-8 py-4 rounded-lg text-lg font-semibold transition-colors"
                                >
                                    View Leaderboard
                                </button>
                            </div>
                        </div>
                    </section>

                    {/* Stats Section */}
                    <section className="py-16 bg-white">
                        <div className="container mx-auto px-4">
                            <div className="grid grid-cols-1 md:grid-cols-4 gap-8 text-center">
                                <div className="p-6">
                                    <div className="text-4xl font-bold text-green-600 mb-2">70</div>
                                    <div className="text-gray-600">Green Mandates</div>
                                </div>
                                <div className="p-6">
                                    <div className="text-4xl font-bold text-blue-600 mb-2">30</div>
                                    <div className="text-gray-600">Required for Certification</div>
                                </div>
                                <div className="p-6">
                                    <div className="text-4xl font-bold text-purple-600 mb-2">1,250+</div>
                                    <div className="text-gray-600">Participating Schools</div>
                                </div>
                